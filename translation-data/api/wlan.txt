下面演示的是初始化wifi后定时扫描,请按实际业务需求修改
The following demonstration is a regular scan after initializing wifi, which can be modified according to actual business requirements.
传入值类型|解释
Incoming Value Type | Explanation
作为STATION时,断开
When STATION, disconnect
作为STATION时,是否已经连接上AP,且获取IP成功
When acting as a STATION, whether the AP has been connected and the IP has been obtained successfully
作为STATION时,连接到指定
As a STATION, connect to the specified
例如
For example
例如: Air780E/Air600E/Air780EG等仅支持
For example, Air780E/Air600E/Air780EG only support
例子
Examples
关闭AP功能
Turn off the AP function
关闭自动重连,1开启自动重连.当前强制开启自动重连
Turn off automatic reconnect, 1 turn on automatic reconnect. Auto reconnect is currently forced on
典型输出
Typical output
最多等3分钟
Wait up to 3 minutes.
最大客户端数量, 默认
Maximum number of clients, default
初始化
Initialization
参数
Parameters
发起连接成功返回true,否则返回false.注意,不代表连接AP成功
Returns true if the connection is initiated, otherwise false. Note that the connection to the AP is not successful
启动
Start
启动成功或停止成功, 返回true, 否则返回
Start success or stop success, returns true, otherwise returns
启用DHCP, 默认也是启用DHCP,这里是演示API使用
Enable DHCP, the default is also enabled DHCP, here is the demo API use
在2023-11-01 之后编译的固件可用
Firmware compiled after 2023-11-01 is available
地址,十六进制字符串形式 "AABBCCDDEEFF" 或原始数据
Address, hexadecimal string form "AABBCCDDEEFF" or raw data
地址,当前仅返回ipv4地址,例如
Address. Currently, only ipv4 addresses are returned. For example
对于仅支持wifiscan的模块, 仅 init/scan/scanResult 函数是可用的
For modules that only support wifiscan, only the init/scan/scanResult functions are available
已经连接成功返回true,否则返回
The connection has been successfully returned true, otherwise it returns
已适配
Adapted
常量
Constant
常量|类型|解释
constant | type | explanation
建立的通道, 默认
established channel, default
当前的hostname或者设置后的
Current hostname or after setting
当前省电模式/设置后的省电模式
Current power saving mode/power saving mode after setting
待设置的MAC地址,长度6字节
MAC address to be set, length 6 bytes
成功创建返回true,否则返回
Returns true for successful creation, otherwise
成功返回true,否则返回
Returns true on success, otherwise
我的wifi物联网设备
My wifi IoT device
扫描wifi频段
scan wifi band
扫描成功后, 会有WLAN_SCAN_DONE消息, 读取即可
After the scan is successful, there will be a WLAN_SCAN_DONE message, read
扫描结果
Scan Results
提醒
Reminder
操作
Operation
新的hostname,可选, 传入就是设置
New hostname, optional, incoming is setting
无
None
是否启用DHCP,默认是
Whether to enable DHCP, the default is
是否转HEX字符, 默认是true,即输出hex字符串
Whether to convert the HEX character, the default is true, that is, the output hex string.
是否隐藏SSID, 默认false,不隐藏
Whether to hide the SSID, default false, do not hide
普通模式,不带密码
Normal mode, without password
普通模式,带密码
Normal mode with password
更多配置项, 2024.3.5新增
More configuration items, 2024.3.5 new
本API于 2023.03.31 新增
This API was added on March 31, 2023.03.31
本API于 2023.07.23 新增
This API was added on July 23, 2023.0.
本API于 2023.10.06 新增
This API was added on October 06, 2023.
本函数应该在wlan.init之前设置好, 最晚应早于
This function should be set before wlan.init, at the latest before
本函数需要在wlan.init之后才允许调用
This function needs to be called after wlan.init.
本库有专属demo，[点此链接查看wlan的demo例子
This library has its own demo,[click this link to view the demo example of wlan
本机IP地址,例如192.168.2.200, 禁用DHCP时必填
Local IP address, such as 192.168.2.200, required when DHCP is disabled
本机IP掩码,例如255.255.255.0, 禁用DHCP时必填
Native IP mask, for example 255.255.255.0, required when DHCP is disabled
本机IP网关,例如192.168.2.1, 禁用DHCP时必填
Native IP gateway, such as 192.168.2.1, required when DHCP is disabled
本页文档由[这个文件](https://gitee.com/openLuat/LuatOS/tree/master/luat/../components/wlan/luat_lib_wlan.c)自动生成。如有错误，请提交issue或帮忙修改后pr，谢谢
This page document is automatically generated by [this file](https://gitee.com/openLuat/LuatOS/tree/master/luat/../components/wlan/luat_lib_wlan.c). If there is any error, please submit issue or help modify pr, thank you
模式
Mode
注意, wlan.scan()是异步API,启动扫描后会马上返回
Note that wlan.scan() is an asynchronous API and will return immediately after starting the scan.
注意, 前提是本次上电后已经传过ssid和或password,否则必失败
Note that the premise is that ssid and or password have been transmitted after this power-on, otherwise it will fail.
注意, 调用本AP时,若wifi模式为STATION,会自动切换成
Note that when calling this AP, if the wifi mode is STATION, it will automatically switch
混合模式, 做AP又做
Mixed mode, do AP and do again
特殊模式, 重用之前的ssid和密码,本次直接连接
Special mode, reuse the previous ssid and password, this direct connection
用法请查阅 wlan.scan() 函数
Please refer to wlan.scan() function for usage
的
of
的password,可选
password of, optional
的SSID,必填
SSID of, required
的密码,可选
Password for, optional
的网关地址, 默认
The gateway address of the, default
的网关掩码, 默认
Gateway mask of, default
的配置选项, 可选
Configuration options for, optional
的默认值是  "LUATOS_" + 设备的MAC值
The default value is the MAC value of the "LUATOS_" device
省电模式,可选, 传入就是设置, 例如
Power saving mode, optional, incoming is the setting, for example
示例
Example
禁用DHCP,自行设置IP/掩码/网关
Disable DHCP, set IP/Mask/Gateway by yourself
获取
Get
获取ip,仅STATION或APSTA模式下有意义
obtain ip address, meaningful only in STATION or APSTA mode
获取wifi扫描结果
Get wifi scan results
获取信息,如AP的bssid,信号强度
Get information such as bssid of AP, signal strength
设置
Setup
设置MAC地址, 2023-03-01之后编译的固件可用
Set MAC address, firmware compiled after 2023-03-01 is available
设置Station模式下的IP获取模式
Set IP acquisition mode in Station mode
设置wifi模式
Set wifi mode
设置为AP模式, 广播ssid, 接收wifi客户端的链接
Set to AP mode, broadcast ssid, receive wifi client link
设置为STATION模式, 也是初始化后的默认模式
Set to STATION mode, which is also the default mode after initialization
设置何种mac地址,对ESP32系列来说,只能设置STA的地址,即
What mac address to set, for ESP32 series, only STA address can be set, namely
设置何种mac地址,对ESP32系列来说,只能设置STA的地址,即0,默认值也是
What mac address to set, for ESP32 series, only STA address can be set, I .e. 0, and the default value is also
设置网关IP,掩码, 通道, 2023.7.13 新增, BSP未必支持
Set gateway IP, mask, channel, 2023.7.13 new, BSP may not support
详情,键值对形式
Details, key-value pair form
详细用法请查看
Please see the detailed usage
请查阅常量表
Please refer to the Constant Table
读取或设置
Read or set
读取或设置省电模式
Read or set power saving mode
返回值
Return Value
返回值类型|解释
return value type | explanation
部分模块支持恢复默认MAC, 例如esp32系列
Some modules support restoring the default MAC, such as the esp32 series
配网
distribution network
配网,|V2, 未测试
Distribution network, | V2, not tested
配网,|微信常用
Distribution network, | WeChat commonly used
配网模式, 默认为esptouch, 若传0则主动停止配网
Distribution network mode, which defaults to esptouch. If 0 is passed, the distribution network will be stopped actively.