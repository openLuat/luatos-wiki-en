本库还有视频教程，[点此链接查看
There are also video tutorials in this library, [click this link to view
本库有专属demo，[点此链接查看gpio的demo例子
This library has its own demo,[click this link to view the demo example of gpio
本页文档由[这个文件](https://gitee.com/openLuat/LuatOS/tree/master/luat/modules/luat_lib_gpio.c)自动生成。如有错误，请提交issue或帮忙修改后pr，谢谢
This page document is automatically generated by [this file](https://gitee.com/openLuat/LuatOS/tree/master/luat/modules/luat_lib_gpio.c). If there is any error, please submit issue or help modify pr, thank you
本API于 2022.05.17 添加
This API was added on 2022.05.17
编号,必须是数值
Number, must be numeric
变换GPIO脚输出电平,仅输出模式可用
Transform GPIO pin output level, only output mode available
参数
Parameters
操作
Operation
常量
Constant
常量|类型|解释
constant | type | explanation
触发中断后,马上上报一次, 然后冷却N个毫秒后,重新接受中断
After the interrupt is triggered, report it once immediately, and then accept the interrupt again after cooling for N milliseconds.
触发中断后,延迟N个毫秒,期间没有新中断且电平没有变化,上报一次
After triggering the interrupt, delay N milliseconds, during which there is no new interrupt and no level change, report once
传入值类型|解释
Incoming Value Type | Explanation
传值正确返回true,否则返回
If the pass value is correct, return true, otherwise return
低电平
Low level
低电平触发,部分设备支持
Low-level trigger, some devices support
电平, 高电平gpio.HIGH, 低电平gpio.LOW, 对应数值1和
Level, high level gpio.HIGH, low level gpio.LOW, corresponding to value 1 and
电平, 可以是 高电平gpio.HIGH, 低电平gpio.LOW, 或者直接写数值1或
Level, which can be high level gpio.HIGH, low level gpio.LOW, or directly write the value 1 or
对应的,如果输入的是一个 50hz的方波,那么不会触发任何上报
Correspondingly, if the input is a 50hz square wave, then no report will be triggered.
返回值
Return Value
返回值类型|解释
return value type | explanation
防抖设置, 根据硬件ticks进行防抖
Anti-shake settings, anti-shake according to hardware ticks
防抖时长,单位毫秒, 最大 65555 ms, 设置为0则关闭
Anti-shake duration, in milliseconds, with a maximum of 65555 ms. If it is set to 0, it is turned off.
复用选项，目前只有EC618平台需要这个参数，有些GPIO可以复用到不同引脚上，可以选择复用选项（0或者4）从而复用到对应的引脚上
Multiplexing option, currently only EC618 platform needs this parameter, some GPIO can be multiplexed to different pins, you can select the multiplexing option (0 or 4) to multiplex to the corresponding pin
高电平
High Level
高电平触发,部分设备支持
High level trigger, some devices support
关闭
Close
关闭防抖,时间设置为0就关闭
Turn off anti-shake, and turn off when the time is set to 0.
关闭管脚功能(高阻输入态),关掉中断
Turn off the pin function (high impedance input state), turn off the interrupt
管脚的GPIO号
GPIO number of the pin
号
No.
号, 0~127, 与硬件相关
Number, 0~127, related to hardware
获取管脚电平
Get Pin Level
获取gpio17的当前电平
Get the current level of gpio17.
假设GPIO16上有LED, 每500ms切换一次开关
Assuming there are LEDs on GPIO16, switch every 500ms
开启防抖, 模式0-冷却, 中断后马上上报, 但100ms内只上报一次
Turn on anti-shake, mode 0-cooling, report immediately after interruption, but report only once within 100ms
开启防抖, 模式1-延时, 中断后等待100ms,期间若保持该电平了,时间到之后上报一次
Turn on anti-shake, mode 1-delay, wait for 100ms after interruption, if the level is maintained during the period, report once after the time is up
例子
Examples
模式, 0冷却模式, 1延时模式. 默认是
mode, 0 cooling mode, 1 delay mode. Default is
平台自定义,1上拉, 2下拉
Platform customization, 1 pull-up, 2 pull-down
若芯片支持pin库, 可用pin.PA7代替数字
If the chip supports pin library, pin.PA7 can be used instead of numbers.
上拉
Pull-up
上拉下列模式, 可以是gpio.PULLUP 或 gpio.PULLDOWN, 需要根据实际硬件选用
The following pull-up mode can be gpio.PULLUP or gpio.PULLDOWN, which needs to be selected according to the actual hardware
上升沿触发
Rising edge trigger
设置管脚电平
Set Pin Level
设置管脚功能
Set Pin Function
设置AIR780E的PIN33复用成gpio18，方向输出,且初始化电平为低,使用硬件默认上下拉配置
Set the AIR780E PIN33 to be multiplexed into gpio18, the direction output, and the initialization level is low, using the hardware default pull-up configuration
设置gpio.setup的pull默认值为上拉
Set the pull default value of gpio.setup to pull up
设置gpio17为低电平
Set gpio17 to low
设置gpio17为输出,且初始化电平为低,使用硬件默认上下拉配置
Set gpio17 to output, and the initialization level is low, using the hardware default pull-up configuration
设置gpio17为输出,且初始化电平为高,且启用内部上拉
Set gpio17 to output, initialize level high, and enable internal pull-up
设置gpio17为输入
Set gpio17 as input
设置gpio27为中断
Set gpio27 to interrupt
设置GPIO脚的默认上拉/下拉设置, 默认是平台自定义(一般为开漏
Set the default pull-up/pull-down setting of GPIO pin, the default is platform customization (generally open and leak
输出模式返回设置电平的闭包, 输入模式和中断模式返回获取电平的闭包
Output mode returns the closure of the set level, input mode and interrupt mode returns the closure of the acquired level
输入输出模式：<br>数字0/1代表输出模式<br>nil代表输入模式<br>function代表中断模式
Input and output mode:<br> Number 0/1 represents output mode <br>nil represents input mode <br>function represents interrupt mode
数值或者字符串
Value or string
双向触发,部分设备支持
Two-way trigger, some devices support
通过PB06脚输出输出8个电平变化
Through the PB06 pin output output 8 level changes
无返回值
No return value
无返回值,总是执行成功
No return value, always successful execution
下降沿触发
Falling edge trigger
下拉
Drop-down
消抖模式, 当前支持2种, 2022.12.16开始支持
Shake elimination mode, currently supports 2 types, starting on 2022.12.16
延迟,当前无固定时间单位
Delay, currently no fixed time unit
已适配
Adapted
于2023.7.2新增
Added in 2023.7.2
在同一个GPIO输出一组脉冲, 注意, len的单位是bit, 高位在前
Output a set of pulses at the same GPIO. Note that len's unit is bit, with the high bit first.
长度 单位是bit, 高位在前
The unit of length is bit, with the high bit in front.
中断触发模式,默认gpio.BOTH。中断触发模式<br>上升沿gpio.RISING<br>下降沿gpio.FALLING<br>上升和下降都触发
Interrupt trigger mode, default gpio.BOTH. interrupt triggering mode <br> rising edge gpio.RISING<br> falling edge gpio.FALLING<br> both rising and falling are triggered