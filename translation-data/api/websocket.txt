本函数仅代表发起成功, 后续仍需根据ready函数判断websocket是否连接正常
This function only indicates that the launch is successful, and it is still necessary to determine whether the websocket is connected normally according to the ready function.
本库有专属demo，[点此链接查看websocket的demo例子
This library has its own demo,[click this link to view websocket demo examples
本页文档由[这个文件](https://gitee.com/openLuat/LuatOS/tree/master/luat/../components/network/websocket/luat_lib_websocket.c)自动生成。如有错误，请提交issue或帮忙修改后pr，谢谢
This page document is automatically generated by [this file](https://gitee.com/openLuat/LuatOS/tree/master/luat/../components/network/websocket/luat_lib_websocket.c). If there is any error, please submit issue or help modify pr, thank you
参数
Parameters
操作码, 默认为字符串帧0, 可选
Opcode, default is string frame 0, optional
成功返回true,否则为false或者
Returns true on success, otherwise false, or
传入值类型|解释
Incoming Value Type | Explanation
打印各种事件
Print various events
待发送的数据,必填
Data to be sent, required
的值有
The value has
发布消息
Publish message
发起成功返回true, 否则返回
Returns true if the launch is successful, otherwise
返回值
Return Value
返回值类型|解释
return value type | explanation
分段发送数据, 最后要用1(即FIN帧结束
Send data in segments, and finally use 1 (that is, the end of the FIN frame
服务器连接已断开
Server connection disconnected
函数发送的消息,服务器在TCP协议层已确认收到
The server has acknowledged receipt of the message sent by the function at the TCP protocol layer.
回调,参数包括
callback, parameters include
加密TCP链接
Encrypted TCP Link
简单发送数据
Simple sending data
开始建立连接
Start establishing a connection
可以是table,也可以是字符串
It can be a table or a string.
客户端
Client
客户端创建
Client Creation
客户端关闭(关闭后资源释放无法再使用
Client shutdown (resources released after shutdown can no longer be used
客户端是否就绪
Whether the client is ready
例子
Examples
连接服务器
Connection Server
连接服务器成功,已经收到websocket协议头部信息,通信已建立
The connection to the server was successful, the websocket protocol header information has been received, and communication has been established.
连接字符串,参考
connection strings, reference
配置是否打开debug信息
Configure whether to open debug information
普通TCP链接
Common TCP Link
其中 sent/disconnect 事件在 2023.04.01 新增
The sent/disconnect event is added on 2023.04.01
若成功会返回websocket客户端实例,否则返回
Returns websocket client instance if successful, otherwise
设置额外的
Set additional
示例
Example
是否打开debug开关
Whether to turn on debug switch
是否为最后一帧,默认1,即马上设置为最后一帧, 也就是单帧发送
Whether it is the last frame, the default is 1, that is, it is immediately set to the last frame, that is, single frame transmission
是否自动重连
Auto reconnect
适配器序号, 只能是socket.ETH0, socket.STA, socket.AP,如果不填,会选择平台自带的方式,然后是最后一个注册的适配器
The adapter serial number can only be socket.ETH0, socket.STA, socket.AP. If it is not filled in, the platform's own method will be selected, and then the last registered adapter will be selected.
收到服务器下发的信息, data, payload 不为
Received information from the server, data, payload not
无
None
无返回值
No return value
形式
Form
已适配
Adapted
注册websocket回调
Register websocket Callback
字符串形式
string form
自动重连
Automatic reconnect
自动重连机制
Automatic reconnection mechanism
自动重连周期 单位ms 默认
Auto reconnect cycle unit ms default