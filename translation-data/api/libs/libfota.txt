本页文档由[这个文件](https://gitee.com/openLuat/LuatOS/tree/master/luat/../script/libs/libfota.lua)自动生成。如有错误，请提交issue或帮忙修改后pr，谢谢
This page document is automatically generated by [this file](https://gitee.com/openLuat/LuatOS/tree/master/luat/../script/libs/libfota.lua). If there is any error, please submit issue or help modify pr, thank you
表示成功
Indicates success
表示服务器断开
Indicates that the server is disconnected
表示接收报文错误
Indicates an error in receiving a message.
表示连接失败
Indicates a connection failure
表示使用iot平台VERSION需要使用 xxx.yyy.zzz形式
Indicates that the use of the iot platform VERSION requires the use of the form xxx.yyy.zzz
表示url错误
Indicates that the url is wrong
参数
Parameters
成功
Success
传入值类型|解释
Incoming Value Type | Explanation
对自定义服务器的要求是
The requirement for a custom server is
返回值
Return Value
返回值类型|解释
return value type | explanation
功能:获取fota的回调函数
function: get the callback function of fota
合宙iot平台
co-platform iot
可选,服务器ca证书数据
optional, server ca certificate data
可选,客户端私钥加密数据
Optional, the client private key encrypts data
可选,客户端私钥口令数据
Optional, client private key password data
可选,客户端ca证书数据
optional, client ca certificate data
可选,请求超时时间,单位毫秒,默认30000毫秒
Optional. The request timeout time, in milliseconds. The default value is 30000 milliseconds.
可选,请求端口,默认
Optional, request port, default
可选,如果数据存储在spiflash时,为
Optional, if the data is stored in the spiflash
可选,数据存储的最大空间
Optional, maximum space for data storage
可选,fota数据存储的起始位置<br>如果是int，则是由芯片平台具体判断<br>如果是string，则存储在文件系统中<br>如果为nil，则由底层决定存储位置
optional, the starting position of fota data storage <br> if it is int, it is determined by the chip platform specifically <br> if it is string, it is stored in the file system <br> if it is nil, the storage position is determined by the bottom layer
类型
Type
例子
Examples
如果还有其他事情要做,就不要立刻
If there's something else to do, don't do it right away.
如使用自建服务器,自行更换
If you use a self-built server, replace it yourself.
若不需要升级, 响应300或以上的代码,务必注意
If you do not need to upgrade, you must pay attention to the code 300 or above.
若需要定时升级
If a scheduled upgrade is required
若需要升级, 响应http 200, body为升级文件的内容
If you need to upgrade, respond to http 200, body is the content of the upgrade file.
升级
Upgrade
升级URL, 若不填则自动使用合宙iot平台
upgrade the url. if you do not fill it in, you will automatically use the aliot platform.
示例
Example
适配状态未知
Adaptation status unknown
无
None
无返回值
No return value
下方示例为合宙iot平台,地址
the following example shows the joint iot platform, address
用法实例
Usage Examples
用户回调函数，回调函数的调用形式为：cbFnc(result) , 必须传
User callback function. The callback function is called in the form of cbFnc(result) and must be passed
注意:因使用了sys.wait()所有api需要在协程中使用
Note: due to the use of sys.wait() all apis need to be used in the coroutine
注意!!!:使用合宙iot平台,必须用luatools量产生成的.bin文件!!! 自建服务器可使用.ota文件
Attention!!!: if you use the hozhou iot platform, you must use the. binfile generated by luatools mass production!!! Self-built servers can use. ota files
自建平台
Self-built platform