本库实现了NEC红外数据接收，发送请使用LuatOS底层固件自带的ir.sendNEC()函数。
This library implements the NEC infrared data reception, send please use LuatOS underlying firmware comes with ir.sendNEC() function.
本库在Air101和Air103测试通过，Air105由于SPI传输帧与帧之间存在间隔因此暂不支持。
This library passed the Air101 and Air103 tests. Air105 is temporarily not supported due to the gap between SPI transmission frames and frames.
本页文档由[这个文件](https://gitee.com/openLuat/LuatOS/tree/master/luat/../script/libs/necir.lua)自动生成。如有错误，请提交issue或帮忙修改后pr，谢谢
This page document is automatically generated by [this file](https://gitee.com/openLuat/LuatOS/tree/master/luat/../script/libs/necir.lua). If there is any error, please submit issue or help modify pr, thank you
参数
Parameters
初始化
Initialization
除能
In addition to energy
传入值类型|解释
Incoming Value Type | Explanation
此时其OUT引脚会输出红外通信信号到单片机。由于一般的SPI从机片选逻辑为低使能，因此这样可以用
At this time its OUT pin will output infrared communication signal to the microcontroller. Since the general SPI slave chip selection logic is low enable, this can be used.
单
Single
定义用户回调函数
Defining User Callback Functions
读取W25QXX chi id，0XEF15,表示芯片型号为W25Q32，0XEF16,表示芯片型号为
Read W25QXX chi id,0XEF15, indicating that the chip model is W25Q32,0XEF16, indicating that the chip model is
返回值
Return Value
返回值类型|解释
return value type | explanation
高低位顺序
High and low bit sequence
关闭成功返回
Close successfully returned
和necir.isClosed()可以最大化的复用SPI接口，避免SPI的独占而浪费。
And necir.isClosed() can maximize the reuse of SPI interface, avoiding SPI exclusive and waste.
红外数据接收完成后的回调函数，回调函数有1个table类型参数，分别存储了地址码，地址码取反，数据码，数据码取反
After the infrared data is received, the callback function has a table type parameter, which stores the address code, address code inversion, data code, and data code inversion respectively.
接线示意图
Wiring Diagram
开启necir数据接收过程
Open necir data receiving process
控制其GND)与W25QXX共用的片选引脚
control its GND) chip select pin shared with W25QXX
例子
Examples
判断necir是否已经完全关闭，关闭后所使用的SPI接口将释放，可以复用为其他功能。如需再次开启，则需要再次调用
Determine whether the necir has been completely closed. After closing, the SPI interface used will be released and can be reused for other functions. To open again, you need to call again
片选
Film selection
频率
Frequency
请求关闭
Request Close
请求关闭necir数据接收过程。此函数执行后并不能保证立刻关闭，具体是否已经关闭需要使用necir.isClosed()来查询。
Request to close the necir data receiving process. After this function is executed, it is not guaranteed to close immediately. Necir. isClosed() is required to query whether it has been closed.
取消片选
Cancel film selection
全双工
Full Duplex
使能
enable
使用的中断引脚，在单IO模式下这个引脚必须是SPI的MISO引脚
The interrupt pin used, which must be the MISO pin of SPI in single IO mode
使用的SPI接口的
The SPI interface used by
示例
Example
适配状态未知
Adaptation status unknown
数据宽度
Data Width
同一个片选GPIO来控制VS1838以及另一个SPI从机，因为片选逻辑是相反的。配合necir库的
The same chip selects GPIO to control VS1838 and another SPI slave because the chip select logic is reversed. with necir library
无
None
无法作为其他用途，除非执行necir.close()并等待necir.isClosed()为true后，SPI将完全释放，才可以用于其他用途。
It cannot be used for other purposes unless you execute necir.close() and wait for necir.isClosed() to be true, the SPI will be completely released before it can be used for other purposes.
协议红外接收
protocol infrared receiving
一个NMOS（例如AO3400）控制VS1838的电源地，如下所示，GPIO充当VS1838的片选信号，当GPIO输出低
An NMOS (such as AO3400) controls the power supply ground of VS1838. As shown below, GPIO acts as the chip select signal of VS1838. When GPIO output is low
一体化接收头
Integrated receiver head
硬件模块：VS1838及其兼容的一体化接收头
Hardware module: VS1838 and its compatible integrated receiver
用法实例
Usage Examples
用法实例：演示用同一个SPI接口驱动VS1838和
Usage Example: Demo drives VS1838 and VS1838 with the same SPI interface
由于本库基于标准四线SPI接口实现，所以虽然只用到了MISO引脚，但是其他3个SPI相关引脚在使用期间
Since this library is based on the standard four-wire SPI interface implementation, although only the MISO pin is used, the other three SPI-related pins are used
则禁用VS1838，此时VS1838不工作，其OUT引脚为高阻，不会干扰MISO；当GPIO输出高，则启用
VS1838 is disabled. VS1838 does not work at this time. Its OUT pin is high impedance and will not interfere with MISO. When GPIO output is high, it is enabled
支持单IO模式，即仅使用一个SPI_MISO引脚，此时necir.init的irq_pin参数必须是SPI_MISO所在引脚。
Single IO mode is supported, that is, only one SPI_MISO pin is used. At this time, the irq_pin parameter of necir.init must be the pin where the SPI_MISO is located.
支持多从机，如果SPI总线上需要挂接其他从设备，为了在不使用红外通信期间，避免VS1838干扰总线的MISO，则可以用
Multi-slave is supported. If other slave devices need to be connected to SPI bus, in order to prevent VS1838 from interfering with MISO of bus during non-infrared communication, you can use
主模式
Main Mode
注意
Attention