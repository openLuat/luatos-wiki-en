包下载完成, 5秒后重启
Package download complete, restart after 5 seconds
本函数只需要调用一次, 通常在main.lua里
This function only needs to be called once, usually in main.lua
本页文档由[这个文件](https://gitee.com/openLuat/LuatOS/tree/master/luat/../script/libs/rtkv.lua)自动生成。如有错误，请提交issue或帮忙修改后pr，谢谢
This page document is automatically generated by [this file](https://gitee.com/openLuat/LuatOS/tree/master/luat/../script/libs/rtkv.lua). If there is any error, please submit issue or help modify pr, thank you
本API正在开发测试中
This API is under development testing
不懂mqtt, 也没有下发需求, 只是想上报一些值
I don't understand mqtt, and I haven't issued any requirements. I just want to report some values.
参数
Parameters
场景举例1, 上报温湿度数据到服务器, 然后网站查看地址是
Scenario 1: Report temperature and humidity data to the server, and then the website view address is
场景举例2, 简易版
Scenario Example 2, Simple Edition
场景举例3, 非实时下发控制
Scenario 3, non-real-time delivery control
成功返回字符,其他情况返回
Returns characters on success, otherwise
成功返回true, 否则返回
Returns true on success, otherwise
初始化
Initialization
初始化,并关闭调试日志
Initialize and turn off the debug log
传入值类型|解释
Incoming Value Type | Explanation
读取服务器的数据,例如OTA信息
Read server data, such as OTA information
返回值
Return Value
返回值类型|解释
return value type | explanation
非task上下文, 会返回nil, 然后后台执行
Non-task context, will return nil, and then background execution
服务器地址,可以自行部署
Server address, can be self-deployed
服务器会保存历史记录,也支持绘制成图表
The server saves history and also supports charting.
关闭调试日志,默认
Turn off the debug log, the default
关于值的类型的说明
About the description of the type of value
关于device值的默认值
About the default value of the device value
获取指定键对应的值
Gets the value corresponding to the specified key
键, 不能为nil,建议只使用英文字母/数字
Key, cannot be nil, it is recommended to use only English letters/numbers.
键, 不能为nil,长度需要2字节以上
Key, cannot be nil, length needs to be more than 2 bytes
将数据存到服务器,例如温湿度,GPS坐标,GPIO状态
Save data to the server, such as temperature and humidity, GPS coordinates, GPIO status
例子
Examples
没有返回值
No return value
没有外网服务器, 内网穿透又很麻烦
There is no external network server, and internal network penetration is very troublesome.
秒查询一次
Query once per second
默认初始化, 开启了调试日志
Default initialization with debug log turned on
那本API就很适合您
The API is perfect for you.
配置信息,详细说明看下面的示例
Configuration information, detailed instructions see the following example
批量设置键值
Batch Set Key Values
其余情况取 mcu.unique_id() 即设备的唯一
In other cases, mcu.unique_id() is the only one of the devices.
请求超时, 单位毫秒, 默认3000毫秒
Request timeout, in milliseconds, 3000 milliseconds by default
如果关心执行结果, 则需要在task里执行
If you care about the execution result, you need to execute it in the task.
若支持4G, 会取
If 4G is supported, it will be taken
若支持wifi, 会取
If wifi is supported, it will be taken
上报GPIO22的状态
Report status of GPIO22
上传巨量数据
Upload huge amounts of data
设备密钥, 默认是设备的唯一id, 即
the device key, which is the unique id of the device by default.
设备识别号,只能是英文字符+数值,区别大小写
Device ID, which can only be English character values, case-sensitive
设置指定键对应的值
Sets the value corresponding to the specified key
实时下发数据给设备
Real-time data delivery to the device
示例
Example
示例设备
Example device
是否还在为上报几个数据值而烦恼
Are you still worrying about reporting several data values?
是否还在为数据存入数据库而头痛不已
Are you still having a headache about storing data in the database?
它不可以
It can't be
它可以
It can
通过 rtkv.get 获取值的时候, 返回的值的类型也会是字符串
When obtaining a value through rtkv.get, the type of the returned value will also be a string.
网站首页, 输入设备识别号就能看数据
On the homepage of the website, you can see the data by entering the device identification number.
详细初始化, 可以只填需要配置的项
Detailed initialization, you can fill in only the items that need to be configured.
小时检查一次
Check once every hour.
需要设置的键值对
Key-value pairs to be set
一分钟上报一次
Report once a minute
已适配
Adapted
远程KV数据库
Remote KV Database
支持传入字符串,布尔值,整数,浮点数, 最终还是会转为字符串上传
Supports incoming strings, Boolean values, integers, and floating-point numbers, which will eventually be converted to string uploads.
执行OTA, 以esp32c3为例
Execute OTA, take esp32c3 as an example
值, 不能为nil,一般建议不超过512字节
The value cannot be nil, generally no more than 512 bytes are recommended.
注意, 必须在task里执行,否则必返回
Note that it must be executed in task, otherwise it must be returned.