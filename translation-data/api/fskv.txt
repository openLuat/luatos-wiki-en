保存的将是
The saved will be
本库的目标是替代fdb库
The goal of this library is to replace the fdb library
本库有专属demo，[点此链接查看fskv的demo例子
This library has its own demo,[click this link to view the demo example of fskv
本页文档由[这个文件](https://gitee.com/openLuat/LuatOS/tree/master/luat/../components/fskv/luat_lib_fskv.c)自动生成。如有错误，请提交issue或帮忙修改后pr，谢谢
This page document is automatically generated by [this file](https://gitee.com/openLuat/LuatOS/tree/master/luat/../components/fskv/luat_lib_fskv.c). If there is any error, please submit issue or help modify pr, thank you
本API在2023.7.26新增,注意与set函数区别
This API was added on July 26, 2023.26. Note the difference with the set function.
参数
Parameters
成功返回迭代器指针,否则返回
Returns an iterator pointer on success, otherwise
成功返回字符串key值, 否则返回
Returns the string key value on success, otherwise
成功返回true,否则返回
Returns true on success, otherwise
初始化kv数据库
Initialize the kv database
传入值类型|解释
Incoming Value Type | Explanation
存在则返回数据,否则返回
Returns data if it exists, otherwise
但不可以是
But it can't be
的名称,必填,不能空字符串
Name of, required, cannot be empty string
的key名称, 必填, 不能是空字符串
The key name of the, required, cannot be an empty string
迭代器获取下一个
Iterator to get the next
读取速度         恒定           脏数据影响速度,非恒定
Read speed constant dirty data affect speed, non-constant
返回的指针
Pointer returned
返回值
Return Value
返回值类型|解释
return value type | explanation
根据key获取对应的数据
Obtain the corresponding data according to the key.
根据key删除数据
Delete data based on key
功能上与EEPROM是类似的
Functionally similar to EEPROM
关于清空fdb库
About emptying the fdb library
获取kv数据库状态
obtain kv database status
兼容fdb的函数
Fdb-compatible functions
均衡擦除         自动           自动
Equalizing Erase Automatic
可选的次级key,仅当原始值为table时有效,相当于
Optional secondary key, valid only when the original value is table, equivalent
空间利用率(对比)  较低           较高
Space utilization (comparison) Lower Higher
例如下列写法,最终获取到的是table,而非第一行的字符串
For example, in the following way, the final result is table instead of the string in the first line.
例子
Examples
清空
Empty
清空整个kv数据库
empty the entire kv database
如果设置的数据填nil, 代表删除对应的
If the set data is filled with nil, it means that the corresponding
若需要"默认值", 对应非bool布尔值, 可以这样写
If "default value" is required, corresponding to a non-bool Boolean value, it can be written as follows
设置数据, 字符串,数值,table,布尔值,均可
Set data, string, value, table, Boolean value, can be
设置一对kv数据
set a pair of kv data
设置table内的键值对数据
Set the key-value pair data in the table.
使用fdb的flash空间,启用时也会替代fdb库
Use fdb's flash space and replace the fdb library when enabled.
示例
Example
数据库,掉电不丢数据
Database, power failure does not lose data
数据库初始化成功
Database initialization successful
数据库迭代器
Database Iterators
无
None
下列语句将打印出4个元素的
The following statement will print out 4 elements of
下载工具是没有提供直接清除fdb数据的途径的, 但有办法解决
The download tool does not provide a way to directly clear fdb data, but there are ways to solve it.
相当于删除
Equivalent to delete
写入数据         恒定           脏数据影响速度,非恒定
Write data constant dirty data affects speed, non-constant
写一个main.lua, 执行 fskv.kvdb_init 后 执行 fskv.clear() 即可全清fdb数据
Write a main.lua, execute fskv.kvdb_init and then execute fskv.clear() to clear fdb data
已使用的空间,单位字节
Space used in bytes
已适配
Adapted
用户数据,必填,不能nil, 支持字符串/数值/table/布尔值, 数据长度最大4095字节
User data, required, cannot be nil, supports string/value/table/boolean, data length up to 4095 bytes
用户数据,必填,支持字符串/数值/table/布尔值, 数据长度最大4095字节
User data, required, supports string/value/table/boolean, data length up to 4095 bytes
与fdb的实现机制导致的差异
differences caused by the implementation mechanism with fdb
长度
Length
注意: 如果key不存在, 或者原本的值不是table类型,将会完全覆盖
Note: If the key does not exist or the original value is not of the table type, it will be completely overwritten.
总可用空间, 单位字节
Total available space in bytes
总kv键值对数量, 单位个
total number of kv key-value pairs, units