从指定文件读取fota数据
read fota data from specified file
以下是从其他途径获取更新包后, 调用本fota库的基本逻辑
The following is the basic logic of calling this fota library after obtaining the update package from other ways
传入值类型|解释
Incoming Value Type | Explanation
传入具体的路径
Pass in concrete path
使用固定内部地址，所以不需要参数了
Use a fixed internal address, so no parameters are required.
使用文件一次性传入
Use file one-time pass-in
例子
Examples
写入fota数据
write fota data
写入fota流程
write fota process
写入到最后一块返回
Write to last block returns
写入长度,传入zbuff时有效,默认是
Write length, valid when zbuff is passed in. The default value is
准备好返回
Ready to return.
出错了
Something went wrong.
初始化fota流程
Initialize the fota process
参数
Parameters
可以是zbuff 也可以是
It can be zbuff or
如果数据存储在spiflash时,为
If the data is stored in the spiflash
如果是从http获取升级包, 那么看demo/fota就可以了
If you get the upgrade package from http, just look at demo/fota
已完成
Completed
已适配
Adapted
底层固件升级
Underlying Firmware Upgrade
成功返回true, 失败返回
Returns true on success and true on failure
接收到最后一块返回
Received the last block returned
提示: ，如果传入的是zbuff，写入成功后，请自行清空zbuff内的数据
Hint: If zbuff is passed in, please empty the data in zbuff after writing successfully.
数据，尽量用
Data, try to use
数据存储的最大空间
Maximum space for data storage
数据存储的起始位置<br>如果是int，则是由芯片平台具体判断<br>如果是string，则存储在文件系统中<br>如果为nil，则由底层决定存储位置
the starting position of data storage <br> if it is int, it is specifically judged by the chip platform <br> if it is string, it is stored in the file system <br> if it is nil, the storage position is decided by the bottom layer
文件路径
File Path
新增offset, len参数, 仅对zbuff有效
Added offset and len parameters, valid only for zbuff
无
None
是否完整走完流程，true 表示正确走完流程了
Whether the process has been completed completely. true indicates that the process has been completed correctly.
有异常返回false，无异常返回
Return false with exception, return without exception
本API于2023.03.23 添加
This API was added on 2023.03.23
本库有专属demo，[点此链接查看fota的demo例子
This library has its own demo,[click this link to view the demo example of fota
本页文档由[这个文件](https://gitee.com/openLuat/LuatOS/tree/master/luat/modules/luat_lib_fota.c)自动生成。如有错误，请提交issue或帮忙修改后pr，谢谢
This page document is automatically generated by [this file](https://gitee.com/openLuat/LuatOS/tree/master/luat/modules/luat_lib_fota.c). If there is any error, please submit issue or help modify pr, thank you
每次写入的数据长度最大不应超过
The maximum length of data written each time should not exceed
由于105的flash从0x01000000开始，所以0就是外部
Since the 105 flash starts at 0x 01000000, 0 is external
示例
Example
等待底层fota流程准备好
Wait for the underlying fota process to be ready
等待底层fota流程完成
Wait for the underlying fota process to complete
系列/EC718系列使用固定内部地址，所以不需要参数了
Series/EC718 series use fixed internal addresses, so no parameters are required
结束fota流程
End the fota process
起始偏移量,传入zbuff时有效,默认是
Starting offset, valid when zbuff is passed in, default is
返回值
Return Value
返回值类型|解释
return value type | explanation
还未写入的数据量，超过64K必须做等待
The amount of data that has not been written must wait if it exceeds 64K.
这里是从其他途径获取的升级包片段
Here is the upgrade package fragment obtained from other means
逐段传入
Passthrough